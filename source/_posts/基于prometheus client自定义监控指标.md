---
title: 基于prometheus client自定义监控指标
date: 2023-12-19 01:13:49
categories:
- 监控Monitor
tags:
- prometheus
- 可观测性
---

# python client
## 简单demo
Gauge和带label的Gauge
```python
import random  
import time  
  
from prometheus_client import Gauge, start_http_server  
  
SAMPLE_REQUEST_TIME = Gauge('sample_request_time', 'a sample metric for request time generated by random number')  
SAMPLE_HOST_REQUEST_TIME = Gauge('sample_host_request_time', 'a sample metric for request time labeled by host', ['host'])  
  
if __name__ == '__main__':  
    start_http_server(8888)  
    while True:  
        SAMPLE_REQUEST_TIME.set(random.randint(0, 100))  
        SAMPLE_HOST_REQUEST_TIME.labels(host='sample_host').set(random.randint(1, 10))  
        time.sleep(5)
```
指标采集效果
![](https://picture-bed-1300530554.cos.ap-nanjing.myqcloud.com/pictures/20231219005822.png)

# golang client
